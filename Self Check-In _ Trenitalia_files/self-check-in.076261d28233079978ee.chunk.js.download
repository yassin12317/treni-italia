(window.webpackJsonp=window.webpackJsonp||[]).push([[83],{"a+Pe":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var o,i=n("5EeR"),r=n("3Tcl"),c=n("7fx4"),s=(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=function(e){function t(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var o=e.apply(this,t)||this;return o.registerActions(),o}return s(t,e),t.prototype.registerActions=function(){this.store.registerAction("update_getSelfCheckinResponse",c.Oe),this.store.registerAction("update_getSelfCheckinFromIdResponse",c.Ne)},t.prototype.getSelfCheckin=function(t,n){var o=this;void 0===n&&(n=!0),r.b.debug("SelfcheckinService - getSelfCheckin(resourceId): ",t),n&&e.prototype.pushLoading.call(this);var i=this,c="";return void 0!==t&&(c=e.prototype.addQueryParam.call(this,"resourceId",t,c)),this.rest.find("selfCheckin/reopen"+c).then((function(t){return i.store.dispatch("update_getSelfCheckinResponse",t),n&&e.prototype.popLoading.call(o),t})).catch((function(t){throw n&&e.prototype.popLoading.call(o),t}))},t.prototype.getSelfCheckinFromId=function(t,n){var o=this;void 0===n&&(n=!0),r.b.debug("SelfcheckinService - getSelfCheckinFromId(id): ",t),n&&e.prototype.pushLoading.call(this);var i=this,c="";return void 0!==t&&(c=e.prototype.addQueryParam.call(this,"id",t,c)),this.rest.find("selfCheckin/reopen/byid"+c).then((function(t){return i.store.dispatch("update_getSelfCheckinFromIdResponse",t),n&&e.prototype.popLoading.call(o),t})).catch((function(t){throw n&&e.prototype.popLoading.call(o),t}))},t}(i.a)},"pages/mail/self-check-in-page":function(e,t,n){"use strict";n.r(t),n.d(t,"SelfCheckInPage",(function(){return d}));var o,i=n("aurelia-framework"),r=n("wmeS"),c=n("yosb"),s=n("a+Pe"),a=n("P60y"),l=n("5fAf"),p=(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),u=function(e,t,n,o){var i,r=arguments.length,c=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(c=(r<3?i(c):r>3?i(t,n,c):i(t,n))||c);return r>3&&c&&Object.defineProperty(t,n,c),c},f=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},d=function(e){function t(t,n){for(var o=[],i=2;i<arguments.length;i++)o[i-2]=arguments[i];var r=e.apply(this,o)||this;return r.selfcheckinService=t,r.travelService=n,r.recoveryId=null,r.registerActions(),r}return p(t,e),t.prototype.registerActions=function(){this.store.registerAction("updateUserAreaStep",l.y)},t.prototype.activate=function(t){e.prototype.activate.call(this,t),t.id&&(this.recoveryId=t.id),this.userProfile||Object(c.g)(void 0)},t.prototype.bind=function(){var e=this;this.recoveryId&&this.selfcheckinService.getSelfCheckinFromId(this.recoveryId).then((function(t){e.getSelfCheckinResponse=t,e.getSelfCheckinResponse.forEach((function(e){e.solution.solutionContainer&&e.solution.solutionContainer.nodeSummaries&&(e.hasCheckinAllowed=e.solution.solutionContainer.nodeSummaries.some((function(e){return e.offerContainerSummaryViews.some((function(e){return e.offerSummaryViews.some((function(e){return"ALLOWED"==e.selfCheckIn}))}))}))||e.solution.solutionActions&&e.solution.solutionActions.some((function(e){return"SELF_CHECK_IN"==e.action})))}))}))},t.prototype.goToDetail=function(e){this.goToPage("user-area_acquisti_detail",{resourceId:e})},t.prototype.checkIn=function(e){var t=this,n={resourceId:e,action:"SELF_CHECK_IN"};this.store.dispatch("updateUserAreaStep",{section:"hidden_area",page:"user-area_acquisti_all"}).then((function(){t.travelService.reopenTravel(e,void 0).then((function(){t.goToPage("user-area_acquisti_selection",n)}))}))},t=u([Object(i.e)(),f("design:paramtypes",[s.a,a.a,Object])],t)}(r.a)},"pages/mail/self-check-in-page.html":function(e,t,n){e.exports='<template>\n  <require from="../../components/tickets/solution/recap/info/solution-info-recap"></require>\n\n  <div slot="main-content">\n    <div class="container">\n\n      <div class="row pb-3">\n        <div class="col-12">\n          <title1 class="bold mb-0" i18n="mail.checkInPageTitle">Self Check-in</title1>\n        </div>\n      </div>\n\n\n      <div repeat.for="getSelfCheckinResponseElem of getSelfCheckinResponse">\n\n\n        \x3c!-- Card --\x3e\n        <solution-info-recap repeat.for="node of getSelfCheckinResponseElem.solution.solutionContainer.nodeSummaries"\n          node.bind="node" index.bind="$index" is-confirmation.bind="false"\n          card-class="shadow-black border-light ${!$last ? \'mb-2\' : \'\'}"\n          barcodes.bind="getSelfCheckinResponseElem.aztecCodes" force-pnr.bind="node.pnr.length > 0">\n        </solution-info-recap>\n        \x3c!-- END Card --\x3e\n\n\n        \x3c!-- Buttons --\x3e\n        <div class="row pt-3 pt-sm-2">\n          <div class="col-12 ${!isMobile() ? \'text-right\' : \'d-flex justify-content-between\'}">\n            <button if.bind="getSelfCheckinResponseElem.hasCheckinAllowed"\n              class="btn btn-primary btn-lg text-uppercase mr-3"\n              click.trigger="checkIn(getSelfCheckinResponseElem.solution.resourceId)"\n              disabled.bind="!getSelfCheckinResponseElem.hasCheckinAllowed">Check-in\n            </button>\n            <button class="btn btn-primary btn-lg text-uppercase" i18n="tickets.manage"\n              click.trigger="goToDetail(getSelfCheckinResponseElem.solution.resourceId)">\n            </button>\n          </div>\n        </div>\n        \x3c!-- END Buttons --\x3e\n        \n      </div>\n\n\n    </div>\n  </div>\n\n</template>'}}]);
//# sourceMappingURL=self-check-in.076261d28233079978ee.bundle.map