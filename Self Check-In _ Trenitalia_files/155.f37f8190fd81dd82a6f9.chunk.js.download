(window.webpackJsonp=window.webpackJsonp||[]).push([[155],{yfWE:function(t,e,n){"use strict";n.r(e),function(t){n.d(e,"DialogRenderer",(function(){return g})),n.d(e,"UxDialogRenderer",(function(){return g})),n.d(e,"hasTransition",(function(){return u})),n.d(e,"transitionEvent",(function(){return d}));var i,o,r,a,s,l=n("70NS"),c=n("3U8n"),d=function(){if(i)return i;var t=l.DOM.createElement("fakeelement"),e={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(var n in e)if(void 0!==t.style[n])return i=e[n];return""},u=(a=["webkitTransitionDuration","oTransitionDuration"],function(t){return o||(o=l.DOM.createElement("fakeelement"),r="transitionDuration"in o.style?"transitionDuration":a.find((function(t){return t in o.style}))),!!r&&!!l.DOM.getComputedStyle(t)[r].split(",").find((function(t){return!!parseFloat(t)}))});var g=function(){function e(){}return e.keyboardEventHandler=function(t){var n=function(t){return"Escape"===(t.code||t.key)||27===t.keyCode?"Escape":"Enter"===(t.code||t.key)||13===t.keyCode?"Enter":void 0}(t);if(n){var i=e.dialogControllers[e.dialogControllers.length-1];if(i&&i.settings.keyboard){var o=i.settings.keyboard;"Escape"===n&&(!0===o||o===n||Array.isArray(o)&&o.indexOf(n)>-1)?i.cancel():"Enter"===n&&(o===n||Array.isArray(o)&&o.indexOf(n)>-1)&&i.ok()}}},e.trackController=function(t){var n=e.dialogControllers;n.length||l.DOM.addEventListener(t.settings.keyEvent||"keyup",e.keyboardEventHandler,!1),n.push(t)},e.untrackController=function(t){var n=e.dialogControllers,i=n.indexOf(t);-1!==i&&n.splice(i,1),n.length||l.DOM.removeEventListener(t.settings.keyEvent||"keyup",e.keyboardEventHandler,!1)},e.prototype.getOwnElements=function(t,e){for(var n=t.querySelectorAll(e),i=[],o=0;o<n.length;o++)n[o].parentElement===t&&i.push(n[o]);return i},e.prototype.attach=function(t){t.settings.restoreFocus&&(this.lastActiveElement=l.DOM.activeElement);var e=l.DOM.createElement("div");e.appendChild(this.anchor);var n=this.dialogContainer=l.DOM.createElement("ux-dialog-container");n.appendChild(e);var i=this.dialogOverlay=l.DOM.createElement("ux-dialog-overlay"),o="number"==typeof t.settings.startingZIndex?t.settings.startingZIndex+"":"auto";i.style.zIndex=o,n.style.zIndex=o;var r=this.host,a=this.getOwnElements(r,"ux-dialog-container").pop();a&&a.parentElement?(r.insertBefore(n,a.nextSibling),r.insertBefore(i,a.nextSibling)):(r.insertBefore(n,r.firstChild),r.insertBefore(i,r.firstChild)),t.controller.attached(),r.classList.add("ux-dialog-open")},e.prototype.detach=function(t){var n=this.host;n.removeChild(this.dialogOverlay),n.removeChild(this.dialogContainer),t.controller.detached(),e.dialogControllers.length||n.classList.remove("ux-dialog-open"),t.settings.restoreFocus&&t.settings.restoreFocus(this.lastActiveElement)},e.prototype.setAsActive=function(){this.dialogOverlay.classList.add("active"),this.dialogContainer.classList.add("active")},e.prototype.setAsInactive=function(){this.dialogOverlay.classList.remove("active"),this.dialogContainer.classList.remove("active")},e.prototype.setupEventHandling=function(t){this.stopPropagation=function(t){t._aureliaDialogHostClicked=!0},this.closeDialogClick=function(e){t.settings.overlayDismiss&&!e._aureliaDialogHostClicked&&t.cancel()};var e=t.settings.mouseEvent||"click";this.dialogContainer.addEventListener(e,this.closeDialogClick),this.anchor.addEventListener(e,this.stopPropagation)},e.prototype.clearEventHandling=function(t){var e=t.settings.mouseEvent||"click";this.dialogContainer.removeEventListener(e,this.closeDialogClick),this.anchor.removeEventListener(e,this.stopPropagation)},e.prototype.centerDialog=function(){var t=this.dialogContainer.children[0],e=Math.max(l.DOM.querySelectorAll("html")[0].clientHeight,window.innerHeight||0);t.style.marginTop=Math.max((e-t.offsetHeight)/2,30)+"px",t.style.marginBottom=Math.max((e-t.offsetHeight)/2,30)+"px"},e.prototype.awaitTransition=function(e,n){var i=this;return new t((function(t){var o=i,r=d();n||!u(i.dialogContainer)?t():i.dialogContainer.addEventListener(r,(function e(n){n.target===o.dialogContainer&&(o.dialogContainer.removeEventListener(r,e),t())})),e()}))},e.prototype.getDialogContainer=function(){return this.anchor||(this.anchor=l.DOM.createElement("div"))},e.prototype.showDialog=function(t){var n=this;s||(s=l.DOM.querySelector("body")),t.settings.host?this.host=t.settings.host:this.host=s;var i=t.settings;return this.attach(t),"function"==typeof i.position?i.position(this.dialogContainer,this.dialogOverlay):i.centerHorizontalOnly||this.centerDialog(),e.trackController(t),this.setupEventHandling(t),this.awaitTransition((function(){return n.setAsActive()}),t.settings.ignoreTransitions)},e.prototype.hideDialog=function(t){var n=this;return this.clearEventHandling(t),e.untrackController(t),this.awaitTransition((function(){return n.setAsInactive()}),t.settings.ignoreTransitions).then((function(){n.detach(t)}))},e.dialogControllers=[],e}();Object(c.transient)()(g)}.call(this,n("B/eG").default)}}]);
//# sourceMappingURL=155.f37f8190fd81dd82a6f9.bundle.map